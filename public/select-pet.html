<!DOCTYPE html>
<html lang="en"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Select Your Pet â€” PetRewardHub</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet"/>
</head>
<body class="bg-[#f8f8f5] font-[Inter]">
<header class="flex items-center justify-between px-6 py-4"><h2 class="text-lg font-bold">ğŸ¾ PetRewardHub</h2><a href="offers.html" class="text-sm underline">Skip</a></header>
<section class="max-w-4xl mx-auto p-6">
  <h1 class="text-3xl font-extrabold">Choose your pet</h1><p class="text-gray-500">Weâ€™ll personalize the quiz & offers for your buddy.</p>
  <div id="petGrid" class="mt-6 grid grid-cols-[repeat(auto-fill,minmax(220px,1fr))] gap-4"></div>
</section>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script src="firebase-init.js"></script>
<script>
const PETS=[{key:'Dog',emoji:'ğŸ¶'},{key:'Cat',emoji:'ğŸ±'},{key:'Bird',emoji:'ğŸ¦'},{key:'Rabbit',emoji:'ğŸ°'},{key:'Fish',emoji:'ğŸ '},{key:'Horse',emoji:'ğŸ´'},{key:'Ferret',emoji:'ğŸ¦¦'},{key:'Reptile',emoji:'ğŸ¦'},{key:'Small Mammal',emoji:'ğŸ¹'}];
const grid=document.getElementById('petGrid');
grid.innerHTML=PETS.map(p=>`<button class="p-4 rounded-xl bg-white shadow hover:shadow-lg text-left flex items-center gap-3" data-pet="${p.key}"><div class="text-3xl">${p.emoji}</div><div class="font-semibold">${p.key}</div></button>`).join('');
firebase.auth().onAuthStateChanged(async user=>{
  if(!user){ location.replace('index.html?loginOpen=true'); return; }
  grid.querySelectorAll('[data-pet]').forEach(btn=>{
    btn.addEventListener('click', async ()=>{
      const pet=btn.getAttribute('data-pet');
      await db.collection('users').doc(user.uid).set({ selectedPet:pet, updatedAt: firebase.firestore.FieldValue.serverTimestamp() }, { merge:true });
      location.href='quiz.html';
    });
  });
});
</script>
</body></html>
