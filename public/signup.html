<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Sign Up ‚Äî PetRewardHub</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <header class="header">
    <div class="header-inner">
      <div class="brand"><span class="paw">üêæ</span> PetRewardHub</div>
      <a class="btn btn-ghost" href="index.html">Home</a>
    </div>
  </header>

  <section class="section container">
    <div class="card" style="max-width:520px;margin:0 auto;">
      <div class="card-body">
        <h2>Create your account</h2>
        <div class="form">
          <label class="label" for="name">Name</label>
          <input id="name" class="input" placeholder="Your name"/>
          <label class="label" for="email">Email</label>
          <input id="email" class="input" type="email" placeholder="you@example.com"/>
          <label class="label" for="pass">Password</label>
          <input id="pass" class="input" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"/>
          <button id="signupBtn" class="btn btn-primary">Sign Up</button>
          <div id="signupMsg" class="helper"></div>
        </div>
      </div>
    </div>
  </section>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="firebase-init.js"></script>
  <script>
    const nameEl = document.getElementById('name');
    const emailEl = document.getElementById('email');
    const passEl = document.getElementById('pass');
    const msg = document.getElementById('signupMsg');
    document.getElementById('signupBtn').addEventListener('click', async ()=>{
      msg.textContent='';
      try{
        const {user} = await auth.createUserWithEmailAndPassword(emailEl.value.trim(), passEl.value);
        await db.collection('users').doc(user.uid).set({
          name: nameEl.value.trim() || 'Pet Lover',
          email: user.email,
          coins: 0,
          selectedPet: null,
          quizDone: false,
          createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
          claimPending: false
        });
        window.location.href = 'index.html?loginOpen=true&created=1';
      }catch(e){
        msg.textContent = e.message;
      }
    });
  </script>
</body>
</html>
